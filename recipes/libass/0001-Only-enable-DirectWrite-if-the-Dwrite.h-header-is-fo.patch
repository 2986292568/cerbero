From c4eb337e7a932bbf257686f3bfbc2e3f07bcc477 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Sebastian=20Dr=C3=B6ge?= <sebastian@centricular.com>
Date: Wed, 7 Dec 2016 14:34:31 +0200
Subject: [PATCH] Only enable DirectWrite if the Dwrite.h header is found

Older Windows versions don't have this.
---
 configure.ac | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/configure.ac b/configure.ac
index 6a6dae9..dfcae50 100644
--- a/configure.ac
+++ b/configure.ac
@@ -190,7 +190,8 @@ if test x$enable_directwrite != xno; then
 AC_MSG_CHECKING([for DIRECTWRITE])
 AC_LINK_IFELSE([
   AC_LANG_PROGRAM(
-    [[#include <windows.h>]],
+    [[#include <windows.h>
+      #include <Dwrite.h>]],
     [[;]],)
   ], [
     AC_DEFINE(CONFIG_DIRECTWRITE, 1, [found DirectWrite])
-- 
2.11.0

