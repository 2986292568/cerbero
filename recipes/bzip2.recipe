# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python


class Recipe(recipe.Recipe):
    name = 'bzip2'
    version = '1.0.6'
    license = 'BSD-like'

    files_libs = ['libbz2']
    files_devel = ['include/bzlib.h']


    def prepare (self):
        self._remove_steps(BuildSteps.CONFIGURE)
        if self.config.target_platform == Platform.DARWIN:
            shared_makefile = 'Makefile-libbz2_dylib'
        elif self.config.target_platform == Platform.WINDOWS:
            shared_makefile = 'Makefile-libbz2_dll'
        else:
            shared_makefile = 'Makefile-libbz2_so'
        self.make = 'make -f %s; make' % shared_makefile
        self.make_install = 'make -f %s install PREFIX=%s; make install PREFIX=%s' % (shared_makefile, self.config.prefix, self.config.prefix)
