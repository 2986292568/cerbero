from cerbero import recipe


class Recipe(recipe.Recipe):
    name = 'bzip2'
    version = '1.0.6'

    def prepare (self):
        self._remove_steps(['configure'])
        if self.config.target_platform == Platform.DARWIN:
            shared_makefile = 'Makefile-libbz2_dylib'
        elif self.config.target_platform == Platform.WINDOWS:
            shared_makefile = 'Makefile-libbz2_dll'
        else:
            shared_makefile = 'Makefile-libbz2_so'
        self.make = 'make -f %s; make' % shared_makefile
        self.make_install = 'make -f %s install PREFIX=%s; make install PREFIX=%s' % (self.config.prefix, shared_makefile, self.config.prefix)
