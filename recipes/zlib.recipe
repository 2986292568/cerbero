from cerbero import recipe


class Recipe(recipe.Recipe):
    name = 'zlib'
    version = '1.2.6'
    force_configure = True

    def prepare(self):
        from cerbero.config import Platform
        if self.config.target_platform == Platform.WINDOWS:
            self.make = 'PREFIX=%s- make -f win32/Makefile.gcc' % self.config.host
            self.make_install = 'make install -f win32/Makefile.gcc '\
                                'INCLUDE_PATH=%(prefix)s/include '\
                                'LIBRARY_PATH=%(prefix)s/lib ' \
                                'BINARY_PATH=%(prefix)s/bin ' % {'prefix':self.config.prefix}
            self._remove_steps (['configure'])
