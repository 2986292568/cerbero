# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python


class Recipe(recipe.Recipe):
    name = 'gst-plugins-base'
    version = '0.10.36'
    config_sh = 'sh autogen.sh'
    configure_options = '--disable-introspection --disable-gst_v4l --disable-gnome_vfs'
    remotes = {'upstream': 'git://anongit.freedesktop.org/gstreamer/gst-plugins-base'}
    deps = ['glib', 'gstreamer', 'libogg', 'pango', 'libtheora', 'libvisual',
            'libvorbis', 'zlib', 'orc']
    platform_deps = { Platform.LINUX: [ 'cdparanoia' ]} #, Platform.DARWIN: [ 'cdparanoia' ] }
    use_system_libs = True

    files_libs = ['libgstapp-0.10', 'libgstaudio-0.10', 'libgstcdda-0.10',
                 'libgstfft-0.10', 'libgstinterfaces-0.10', 'libgstnetbuffer-0.10',
                 'libgstpbutils-0.10', 'libgstriff-0.10', 'libgstrtp-0.10',
                 'libgstrtsp-0.10', 'libgstsdp-0.10', 'libgsttag-0.10',
                 'libgstvideo-0.10',]

    files_effects = [
             'lib/gstreamer-0.10/libgstadder%(sext)s',
             'lib/gstreamer-0.10/libgstapp%(sext)s',
             'lib/gstreamer-0.10/libgstaudioconvert%(sext)s',
             'lib/gstreamer-0.10/libgstaudiorate%(sext)s',
             'lib/gstreamer-0.10/libgstaudioresample%(sext)s',
             'lib/gstreamer-0.10/libgstaudiotestsrc%(sext)s',
             'lib/gstreamer-0.10/libgstffmpegcolorspace%(sext)s',
             'lib/gstreamer-0.10/libgstgdp%(sext)s',
             'lib/gstreamer-0.10/libgstgio%(sext)s',
             'lib/gstreamer-0.10/libgsttypefindfunctions%(sext)s',
             'lib/gstreamer-0.10/libgstvideorate%(sext)s',
             'lib/gstreamer-0.10/libgstvideoscale%(sext)s',
             'lib/gstreamer-0.10/libgstvideotestsrc%(sext)s',
             'lib/gstreamer-0.10/libgstvolume%(sext)s',
    ]

    files_playback = [
             'lib/gstreamer-0.10/libgstcdparanoia%(sext)s',
             'lib/gstreamer-0.10/libgstdecodebin2%(sext)s',
             'lib/gstreamer-0.10/libgstlibvisual%(sext)s',
            ]

    files_net = [
             'lib/gstreamer-0.10/libgsttcp%(sext)s',
            ]

    files_codecs = [
             'lib/gstreamer-0.10/libgstsubparse%(sext)s',
             'lib/gstreamer-0.10/libgstogg%(sext)s',
             'lib/gstreamer-0.10/libgstpango%(sext)s',
             'lib/gstreamer-0.10/libgsttheora%(sext)s',
             'lib/gstreamer-0.10/libgstvorbis%(sext)s',
            ]

    files_vis = [
             'lib/gstreamer-0.10/libgstlibvisual%(sext)s',
            ]

    files_devel = [
            'include/gstreamer-0.10/gst/app',
            'include/gstreamer-0.10/gst/audio',
            'include/gstreamer-0.10/gst/cdda',
            'include/gstreamer-0.10/gst/fft',
            'include/gstreamer-0.10/gst/interfaces',
            'include/gstreamer-0.10/gst/netbuffer',
            'include/gstreamer-0.10/gst/pbutils',
            'include/gstreamer-0.10/gst/riff',
            'include/gstreamer-0.10/gst/rtp',
            'include/gstreamer-0.10/gst/rtsp',
            'include/gstreamer-0.10/gst/sdp',
            'include/gstreamer-0.10/gst/tag',
            'include/gstreamer-0.10/gst/video',
            'lib/pkgconfig/gstreamer-app-0.10.pc',
            'lib/pkgconfig/gstreamer-audio-0.10.pc',
            'lib/pkgconfig/gstreamer-cdda-0.10.pc',
            'lib/pkgconfig/gstreamer-fft-0.10.pc',
            'lib/pkgconfig/gstreamer-interfaces-0.10.pc',
            'lib/pkgconfig/gstreamer-netbuffer-0.10.pc',
            'lib/pkgconfig/gstreamer-pbutils-0.10.pc',
            'lib/pkgconfig/gstreamer-riff-0.10.pc',
            'lib/pkgconfig/gstreamer-rtp-0.10.pc',
            'lib/pkgconfig/gstreamer-rtsp-0.10.pc',
            'lib/pkgconfig/gstreamer-sdp-0.10.pc',
            'lib/pkgconfig/gstreamer-tag-0.10.pc',
            'lib/pkgconfig/gstreamer-video-0.10.pc',
            'lib/pkgconfig/gstreamer-plugins-base-0.10.pc',
    ]

    platform_files_sys = {
        Platform.LINUX: [
             'lib/gstreamer-0.10/libgstalsa%(sext)s',
             'lib/gstreamer-0.10/libgstximagesink%(sext)s',
             'lib/gstreamer-0.10/libgstxvimagesink%(sext)s',
            ]
    }

    def prepare(self):
        if self.config.target_platform in [Platform.WINDOWS, Platform.DARWIN]:
            self.configure_options += ' --disable-gtk-doc'
