# -*- Mode: Python -*- vi:si:et:sw=4:sts=4:ts=4:syntax=python


class Recipe(recipe.Recipe):
    name = 'pygobject'
    version = '2.28.6'
    licenses = [License.LGPLv2_1Plus]
    configure_options = '--disable-introspection'

    def post_install(self):
        import shutil
        if self.config.target_platform == Platform.WINDOWS:
            shutil.move(os.path.join(self.config.prefix, 'lib', 'libpyglib-2.0-python.pyd'),
                        os.path.join(self.config.prefix, 'bin', 'libpyglib-2.0-python.pyd'))

    # lets not use files_libs here to avoid getting the lib into the devel package,
    # as there is only a libpyglib-2.0-python.so being generated, and _gio.so included in the
    # runtime package depends on it
    files_mainlib = ['%(sdir)s/libpyglib-2.0-python%(pext)s']
    files_python = ['site-packages/glib/_glib%(pext)s',
                    'site-packages/glib/__init__.py',
                    'site-packages/glib/option.py',
                    'site-packages/gobject/constants.py',
                    'site-packages/gobject/_gobject%(pext)s',
                    'site-packages/gobject/__init__.py',
                    'site-packages/gobject/propertyhelper.py',
                    'site-packages/gtk-2.0/dsextras.py',
                    'site-packages/gtk-2.0/gio/_gio%(pext)s',
                    'site-packages/gtk-2.0/gio/__init__.py',
                    'site-packages/pygtk.py',
    ]
    files_devel = ['lib/pkgconfig/pygobject-2.0.pc',
                   'include/pygtk-2.0/pyglib.h',
                   'include/pygtk-2.0/pygobject.h']
